<!--
 * @Date        : 2020-08-09 17:29:36
 * @LastEditors : anlzou
 * @Github      : https://github.com/anlzou
 * @LastEditTime: 2020-08-09 17:46:38
 * @FilePath    : \web-test\vue-test\vueDemo\vue_8_watch.html
 * @Describe    : 
-->
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <title>Document</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="">
    <script src="./vue.js"></script>
</head>

<body>
    <!-- 
        Vue.js 监听属性 watch，我们可以通过 watch 来响应数据的变化。
    -->
    <div id="app-1">
        <p style="font-size: 25px;">计数器：{{counter}}</p>
        <button @click='counter++' style="font-size: 25px;">点击</button>
    </div>
    <br>
    <!-- 
        进行千米与米之间的换算
     -->
    <div id="app-2">
        <div id="app-2-1" style="font-size: 25px;">
            千米：<input type="text" v-model="kilometers"><br>
            &nbsp;&nbsp;&nbsp;米：<input type="text" v-model="meters">
        </div>
        <p id="info"></p>
    </div>

    <script>
        var app_1 = new Vue({
            el: '#app-1',
            data: {
                counter: 0
            }
        });
        app_1.$watch('counter', function (nval, oval) {
            alert('计数器值的变化：' + oval + ' 变为' + nval + "!");
        })

        var app_2 = new Vue({
            el: '#app-2',
            data: {
                kilometers: 0,
                meters: 0
            },
            methods: {

            },
            computed: {

            },
            watch: {
                kilometers: function (val) {
                    this.kilometers = val;
                    this.meters = this.kilometers * 1000
                },
                meters: function (val) {
                    this.kilometers = val / 1000;
                    this.meters = val;
                }
            }
        });
        app_2.$watch('kilometers', function (newValue, oldValue) {
            document.getElementById('info').innerHTML = '修改前值为：' + oldValue +
                "修改后值为：" + newValue;
        })
    </script>
</body>

</html>